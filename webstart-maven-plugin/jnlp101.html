<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-05-22 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Jerome Lacoste" />
    <meta name="Date-Creation-yyyymmdd" content="20100608" />
    <meta name="Date-Revision-yyyymmdd" content="20160522" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MWEBSTART :: Webstart Maven Plugin &#x2013; JNLP 101</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/mojohaus/mojo-parent">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://www.mojohaus.org/" id="bannerLeft">
                                                                                        <img src="http://www.mojohaus.org/images/mojo_logo.png"  alt="MojoHaus"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.mojohaus.org/" class="externalLink" title="MojoHaus">
        MojoHaus</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="http://www.mojohaus.org/mojo-parent" class="externalLink" title="MojoHaus Parent">
        MojoHaus Parent</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../" title="MWEBSTART :: Project">
        MWEBSTART :: Project</a>
                    <span class="divider">/</span>
      </li>
                <li class="">
                    <a href="./" title="MWEBSTART :: Webstart Maven Plugin">
        MWEBSTART :: Webstart Maven Plugin</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">JNLP 101</li>
        
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2016-05-22</li>
              <li id="projectVersion" class="pull-right">
                      <span class="divider">|</span>
                    Version: 1.0-beta-8-SNAPSHOT
        </li>
            
                                    
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../index.html" title="MWEBSTART :: Project">
          <span class="none"></span>
        MWEBSTART :: Project</a>
            </li>
                              <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Usage">
          <span class="none"></span>
        Usage</a>
            </li>
                
      <li>
  
                          <a href="faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="cookbook.html" title="Cookbook recipe">
          <span class="none"></span>
        Cookbook recipe</a>
            </li>
                
      <li>
  
                          <a href="jnlp-mojos-overview.html" title="JNLP goals overview">
          <span class="none"></span>
        JNLP goals overview</a>
            </li>
                
      <li>
  
                          <a href="upgrade.html" title="Plugin Upgrades">
          <span class="none"></span>
        Plugin Upgrades</a>
            </li>
                
      <li>
  
                          <a href="contributors.html" title="Notes to users and contributors">
          <span class="none"></span>
        Notes to users and contributors</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>JNLP 101</a>
          </li>
                              <li class="nav-header">Examples</li>
                                                                                            
      <li>
  
                          <a href="index.html" title="Getting Started">
          <span class="icon-chevron-down"></span>
        Getting Started</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="examples/inbuilt_templates.html" title="Default inbuilt templates">
          <span class="none"></span>
        Default inbuilt templates</a>
            </li>
                    
      <li>
  
                          <a href="examples/keystore_gen.html" title="Keystore generation and usage">
          <span class="none"></span>
        Keystore generation and usage</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="examples/single_webstart_app.html" title="Static web site">
          <span class="none"></span>
        Static web site</a>
            </li>
                                                                              
      <li>
  
                          <a href="index.html" title="WAR bundling">
          <span class="icon-chevron-down"></span>
        WAR bundling</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="examples/war_bundle_1.html" title="Bundle JNLP apps within a new WAR">
          <span class="none"></span>
        Bundle JNLP apps within a new WAR</a>
            </li>
                    
      <li>
  
                          <a href="examples/war_bundle_2.html" title="Add JNLPs apps to an existing WAR">
          <span class="none"></span>
        Add JNLPs apps to an existing WAR</a>
            </li>
              </ul>
        </li>
                                                                              
      <li>
  
                          <a href="index.html" title="JNLP Download Servlet">
          <span class="icon-chevron-down"></span>
        JNLP Download Servlet</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="examples/simple_jnlp_download_servlet.html" title="Simple">
          <span class="none"></span>
        Simple</a>
            </li>
                    
      <li>
  
                          <a href="examples/advanced_jnlp_download_servlet.html" title="Advanced">
          <span class="none"></span>
        Advanced</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="examples/more_examples.html" title="More examples">
          <span class="none"></span>
        More examples</a>
            </li>
                              <li class="nav-header">Links</li>
                              
      <li>
  
                          <a href="http://java.sun.com/products/javawebstart/" class="externalLink" title="Java Webstart">
          <span class="none"></span>
        Java Webstart</a>
            </li>
                                                                                                
      <li>
  
                          <a href="index.html" title="Security">
          <span class="icon-chevron-down"></span>
        Security</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/#security" class="externalLink" title="Java Security Tools">
          <span class="none"></span>
        Java Security Tools</a>
            </li>
                    
      <li>
  
                          <a href="http://mojo.codehaus.org/keytool-maven-plugin/" class="externalLink" title="Keytool Maven Plugin">
          <span class="none"></span>
        Keytool Maven Plugin</a>
            </li>
                    
      <li>
  
                          <a href="http://maven.apache.org/plugins/maven-jar-plugin/" class="externalLink" title="JAR signing with Maven">
          <span class="none"></span>
        JAR signing with Maven</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="http://java.sun.com/j2se/1.5.0/docs/guide/javaws/developersguide/downloadservletguide.html" class="externalLink" title="Sun's Download Servlet Guide">
          <span class="none"></span>
        Sun's Download Servlet Guide</a>
            </li>
                
      <li>
  
                          <a href="http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html" class="externalLink" title="Velocity user guide">
          <span class="none"></span>
        Velocity user guide</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="www.mojohaus.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="JNLP_101"></a>JNLP 101</h2>
<p>Some things that are not directly related to the Webstart Maven Plugin but can help you make good use of it.</p>
<div class="section">
<h3><a name="Recommended_work_directory_layout"></a>Recommended work directory layout</h3>
<p>Mostly taken from <a class="externalLink" href="http://java.sun.com/j2se/1.5.0/docs/guide/javaws/developersguide/downloadservletguide.html"> JnlpDownloadServlet guide</a>.</p>
<div>
<pre>launch.jnlp (may require variable expansion)
application.jar
lib.jar (lib)
version.xml
images/icon.gif</pre></div></div>
<div class="section">
<h3><a name="Configuring_your_webapp_to_use_JnlpDownloadServlet"></a>Configuring your webapp to use JnlpDownloadServlet</h3>
<p>The JnlpDownloadServlet JAR file is provided with the Java 5.0 distribution in the examples directory.</p>
<p>The JnlpDownloadServlet offers some advantages:</p>
<ul>
<li><tt>$$codebase</tt>, <tt>$$context</tt> and <tt>$$name</tt> tokens in your JNLP file are replaced with values that represent where your JNLP file is hosted. This allows you to deploy your web application anywhere without modification. The relevant paths will be worked out at runtime.</li>
<li>If you have chosen to provide Pack200 format compressed files, JnlpDownloadServlet will decide if the webstart client that the user has chosen can handle the compressed format. If the client is compatible, the JnlpDownloadServlet will route requests for JAR files to the appropriate compressed file. This may improve the download time of your application.</li></ul>
<p>To use the JnlpDownloadServlet you must declare a dependency on it in the webapp's <tt>pom.xml</tt> and you must make modifications to your webapp's <tt>web.xml</tt> file.</p>
<p>Here is an example of a <tt>web.xml</tt> with the JnlpDownladServlet enabled. All requests to files ending in <tt>.jnlp</tt> are routed through the download servlet. More information and examples are availabe in the JnlpDownloadServlet's documentation.</p>
<div>
<pre>&lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot; &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;&gt;

&lt;web-app&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;JnlpDownloadServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;jnlp.sample.servlet.JnlpDownloadServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;JnlpDownloadServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.jnlp&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre></div>
<p><b>Note:</b> The dependency described below is to be placed in the webapp's <tt>pom.xml</tt>. This has nothing to do with the webstart project's <tt>pom.xml</tt>, unless using the <tt>jnlp-download-servlet</tt> goal, in which case the plugin is configured in the webapp's project.</p>
<p>Unfortunately, the JnlpDownloadServlet's JAR file is not yet available in the central Maven repository. Until the licensing issues are worked out, you'll need to keep a copy of the JAR file in your own remote repository or install the package in your local repository. Here's the command for performing the second option:</p>
<div>
<pre>mvn install:install-file -Dfile=%JAVA_HOME%\sample\jnlp\servlet\jnlp-servlet.jar \
-DgroupId=com.sun.java.jnlp -DartifactId=jnlp-servlet -Dversion=5.0 \
-Dpackaging=jar -DgeneratePom=true</pre></div>
<p>And the corresponding dependency definition:</p>
<div>
<pre>    &lt;!--
      Sun's JnlpDownladServlet takes the template JNLP file and inserts
      relevant values for $$codebase and other parameters
    --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.java.jnlp&lt;/groupId&gt;
      &lt;artifactId&gt;jnlp-servlet&lt;/artifactId&gt;
      &lt;version&gt;5.0&lt;/version&gt;
      &lt;scope&gt;runtime&lt;/scope&gt;
    &lt;/dependency&gt;</pre></div>
<div class="section">
<h4><a name="How_to_detect_the_codebase_from_the_Web_Start_application_using_the_JNLP_API"></a>How to detect the codebase from the Web Start application using the JNLP API</h4>
<p>Code by Geoffrey De Smet.</p>
<div>
<pre>  /**
   * Uses the JNLP API to determine the webapp context.
   * If used outside of webstart, &lt;code&gt;fallBackWebAppContextUrl&lt;/code&gt; is returned.
   * For example this could return &lt;code&gt;http://localhost:8080/mywebapp/&lt;/code&gt;.
   *
   * @return the url to the webapp ending with a slash
   */
  public String getWebAppContextUrl()
  {
    String webAppContextUrl;
    try
    {
      BasicService basicService =
          (BasicService) ServiceManager.lookup( &quot;javax.jnlp.BasicService&quot; );
      String codeBase = basicService.getCodeBase().toExternalForm();
      if ( !codeBase.endsWith( &quot;/&quot; ) )
      {
        codeBase += &quot;/&quot;;
      }
      int webAppContextUrlLength =
          codeBase.lastIndexOf(jnlpRelativeDirectoryPathFromWebAppContext);
      webAppContextUrl = codeBase.substring( 0, webAppContextUrlLength + 1 );
    } catch ( UnavailableServiceException e ) {
      // TODO logging
      webAppContextUrl = fallBackWebAppContextUrl;
    }
    return webAppContextUrl;
  }</pre></div></div></div>
<div class="section">
<h3><a name="Pack200_signing_explained"></a>Pack200 signing explained</h3>
<p>If you choose to produce Pack200 files as part of your build, there is an additional processing overhead. This section explains what's going on.</p>
<p>Pack200 doesn't just compress your JAR files, it actually modifies the class files, stripping out everything but the bare essentials. Because of these modifications, any digital signature that is applied before the packing takes place will be invalidated.</p>
<p>Before a digital signature is applied Pack200 must be allowed to carry out its aggressive class file modifications. This is achieved by packing and unpacking the JAR file with the Pack200 utility. The result is a JAR with modified class files ready to be signed.</p>
<p>The goal then signs this pre-prepared JAR and verifies the signature.</p>
<p>The Pack200 packing process is applied again to produce the final downloadable Pack200 file.</p>
<p>As an optional step, to make sure that everything has gone well, it is recommended that the final Pack200 file is unpacked one final time and the signature verified on the resulting JAR file. This just makes sure that the final packing process hasn't made any further modifications to the file that have invalidated the digital signature. This is an unlikely event and this extra optional check is not yet implemented as part of the plugin.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2005&#x2013;2016
                        <a href="http://www.mojohaus.org">MojoHaus</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="https://www.ohloh.net/p/5211/widgets/project_thin_badge.js"></script>
    </div>
        </div>
    </footer>
        </body>
</html>